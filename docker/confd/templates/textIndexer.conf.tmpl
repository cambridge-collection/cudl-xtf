<?xml version="1.0" encoding="utf-8"?>
<textIndexer-config>
  {{range gets "/xtf/index/*/name"}}
    <index name="{{.Value | html}}">
      {{$id := index (split .Key "/") 3}}
      <!-- Generated by confd for {{printf "/xtf/index/%s/*" $id }} -->
      {{$name := .Value}}
      {{$dataKey := printf "/xtf/index/%s/data/dir" $id}}
      {{$indexDirKey := printf "/xtf/index/%s/dir" $id}}
      {{$extraKey := printf "/xtf/index/%s/extra" $id}}
      {{$omitBoilerplateKey := printf "/xtf/index/%s/omit/boilerplate" $id}}
      {{if exists $dataKey}}
        <src path="{{getv $dataKey | html}}" scan="all"/>
      {{else}}
        <src path="{{printf "/var/lib/xtf/data/%s" $name | html}}" scan="all"/>
      {{end}}
      {{if exists $indexDirKey}}
        <db path="{{getv $indexDirKey | html}}" rotate="yes"/>
      {{else}}
      <db path="{{printf "/var/lib/xtf/index/%s" $name | html}}" rotate="yes"/>
      {{end}}
      {{if exists $extraKey}}
        {{getv $extraKey}}
      {{end}}

      {{if not (exists $omitBoilerplateKey)}}
        <validation path="./conf/indexValidation.xml"/>
        <chunk size="200" overlap="20"/>
        <docselector path="./style/textIndexer/docSelector.xsl"/>
        <stopwords list="a an and are as at be but by for if in into is it no not of on or such that the their then there these they this to was will with"/>
        <pluralmap path="./conf/pluralFolding/pluralMap.txt.gz"/>
        <accentmap path="./conf/accentFolding/accentMap.txt"/>
        <spellcheck createDict="yes"/>
      {{end}}
    </index>
  {{end}}
</textIndexer-config>
